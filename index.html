<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visualizador de Algoritmos</title>
    
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    
    <!-- KaTeX -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/contrib/auto-render.min.js"></script>

    <!-- Pseudocode JS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.css">
    <script src="https://cdn.jsdelivr.net/npm/pseudocode@latest/build/pseudocode.min.js"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="app-container">
        
        <!-- BARRA LATERAL -->
        <nav id="sidebar-nav">
            <div class="nav-header">
                <h3>B√∫squeda en redes</h3>
            </div>
            <div class="nav-items">
                <a href="#" class="nav-link active" data-page="introduccion">
                    <span>üëã</span> Introducci√≥n
                </a>
                <a href="#" class="nav-link" data-page="algoritmo">
                    <span>‚öôÔ∏è</span> Algoritmo
                </a>
                <a href="#" class="nav-link" data-page="mapa">
                    <span>üó∫Ô∏è</span> Visualizaci√≥n
                </a>
                <a href="#" class="nav-link" data-page="estadisticas">
                    <span>üìä</span> Estad√≠sticas
                </a>
                <a href="#" class="nav-link" data-page="referencias">
                    <span>üìö</span> Referencias
                </a>
            </div>
        </nav>

        <!-- √ÅREA PRINCIPAL -->
        <main id="content-area">
            
            <div id="introduccion-view" class="view-section active">
    
                <div class="intro-hero">
                    <h1>Bienvenido al Visualizador de B√∫squeda en Redes con incertidumbre</h1>
                    <p class="intro-subtitle">
                        Explora c√≥mo los algoritmos de muestreo greedy identifican nodos cr√≠ticos en grafos dirigidos ac√≠clicos.
                    </p>
                </div>

                <div class="intro-section motivation-box">
                    <h2>üí° Motivaci√≥n</h2>
                    <p>
                        Durante el brote de COVID-19, la vigilancia de aguas servidas se convirti√≥ en una herramienta crucial para detectar y monitorear la propagaci√≥n del virus en comunidades.
                        Sin embargo, las redes de alcantarillado son complejas y a menudo inciertas, lo que dificulta la identificaci√≥n r√°pida de fuentes de infecci√≥n.
                        Limitado por recursos, es esencial desarrollar estrategias eficientes para muestrear estas redes y localizar nodos infectados con el menor n√∫mero de exploraciones posibles, tanto en cantidad de muestras como en tiempo.
                    </p>
                </div>

                <hr class="section-divider">

                <div class="intro-section news-section">
                    <h2>üì∞ Noticias y Contexto</h2>

                    <div class="news-card reverse">
                        <div class="news-content">
                            <h3>Exitoso plan piloto en Chill√°n: Detectan presencia de COVID-19 en aguas servidas</h3>
                            <p>
                                En los laboratorios de la Universidad de Concepci√≥n se obtuvieron los primeros resultados positivos del an√°lisis de aguas servidas en Chill√°n para la detecci√≥n temprana de posibles focos de COVID-19. 
                            </p>
                            <a href="https://youtu.be/Hd2uDd3VINc?si=vdgtmpsGvaoGK0IX" target="_blank" class="read-more-link">
                                Leer noticia completa
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                    <polyline points="12 5 19 12 12 19"></polyline>
                                </svg>
                            </a>
                        </div>
                        <div class="news-visual">
                            <div class="news-video">
                                <iframe 
                                    width="560" 
                                    height="315"
                                    src="https://www.youtube.com/embed/Hd2uDd3VINc?si=gOGjHqunt42OyNE9"
                                    title="YouTube video player"
                                    frameborder="0"
                                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                                    referrerpolicy="strict-origin-when-cross-origin"
                                    allowfullscreen>
                                </iframe>
                            </div>
                        </div>
                    </div>

                    <div class="news-card">
                        <div class="news-content">
                            <h3>Innovador proyecto que analiz√≥ aguas residuales mostr√≥ las variantes que m√°s circulan en Chile, c√≥mo es capaz de detener brotes y anticipar hasta en cinco d√≠as aparici√≥n de s√≠ntomas</h3>
                            <p>
                                Descripci√≥n breve + link
                            </p>
                            <a href="https://www.latercera.com/que-pasa/noticia/innovador-proyecto-que-analizo-aguas-residuales-mostro-las-variantes-que-mas-circulan-en-chile-como-es-capaz-de-detener-brotes-y-anticipar-hasta-en-cinco-dias-aparicion-de-sintomas/Q72PT6YQSJBTRGIABZQUCCVCCQ/" target="_blank" class="read-more-link">
                                Leer noticia completa
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                    <polyline points="12 5 19 12 12 19"></polyline>
                                </svg>
                            </a>
                        </div>
                        <div class="news-visual">
                            <div class="placeholder-image">
                                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="1.5">
                                    <circle cx="12" cy="12" r="10"></circle>
                                    <line x1="2" y1="12" x2="22" y2="12"></line>
                                    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                                </svg>
                                <span>Imagen</span>
                            </div>
                        </div>
                    </div>

                    <div class="news-card reverse">
                        <div class="news-content">
                            <h3>¬øPara qu√© sirve el monitoreo de aguas residuales?</h3>
                            <p>
                                Descripci√≥n breve + link
                            </p>
                            <a href="https://www.dw.com/es/virus-y-bacterias-para-qu√©-sirve-el-monitoreo-de-aguas-residuales/a-71126749" target="_blank" class="read-more-link">
                                Leer noticia completa
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                    <line x1="5" y1="12" x2="19" y2="12"></line>
                                    <polyline points="12 5 19 12 12 19"></polyline>
                                </svg>
                            </a>
                        </div>
                        <div class="news-visual">
                            <div class="placeholder-image">
                                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#94a3b8" stroke-width="1.5">
                                    <path d="M18 20V10"></path>
                                    <path d="M12 20V4"></path>
                                    <path d="M6 20v-6"></path>
                                </svg>
                                <span>Imagen</span>
                            </div>
                        </div>
                    </div>                   
                </div>

                <hr class="section-divider">

                <div class="intro-section research-box">
                    <h2>üî¨ Trabajo e Investigaci√≥n</h2>
                    <p>Este proyecto se basa en los siguientes pilares de investigaci√≥n:</p>
                    <ul class="custom-list">
                        <li>
                            <strong>Muestreo en Grafos:</strong> T√©cnicas para estimar propiedades de una red sin observarla completamente.
                        </li>
                        <li>
                            <strong>Inferencia Bayesiana:</strong> Uso de probabilidad para actualizar el conocimiento sobre los nodos vecinos.
                        </li>
                        <li>
                            <strong>Optimizaci√≥n Submodular:</strong> Garant√≠as te√≥ricas de que la estrategia greedy es cercana a la √≥ptima.
                        </li>
                    </ul>
                </div>

            </div>

            <div id="algoritmo-view" class="view-section">
                <h1>Algoritmo Greedy</h1>

                <div class="algo-theory-section">
                    <div class="theory-card">
                        <h3>üéØ Objetivo</h3>
                        <p>
                            Una estrategia que minimice el n√∫mero de d√≠a para detectar un brote en una red de alcantarillado, bajo un presupuesto limitado de exploraciones.
                        </p>
                    </div>
                    <div class="theory-card">
                        <h3>üß† Asunciones</h3>
                        <ul>
                            <li>La red se represenseta con un grafo dirigido $T = (V,E)$ con ra√≠z en la planta de tratamiento de aguas servidas.</li>
                            <li>Hay un solo nodo infectado.</li>
                            <li>El presupuesto $B$ limita las exploraciones.</li>
                        </ul>
                    </div>
                    <div class="theory-card">
                        <h3>üëÄ Observaciones</h3>
                        <p>
                            ---
                        </p>
                    </div>
                </div>

                <hr class="section-divider">

                <div class="algo-example-section">
                    <h2>Ejemplo Conceptual</h2>
                    <p>Visualicemos la correspondencia entre la exploraci√≥n del grafo y la toma de decisiones.</p>
                    
                    <div class="algo-controls simple-centered-controls">
    
                    <div class="controls-top-row">
                        <button id="ex-btn-prev" class="control-btn fixed-btn">‚èÆ Anterior</button>
                        <div class="step-display">
                            Paso <span id="ex-step-number">0</span>
                        </div>
                        <button id="ex-btn-next" class="control-btn fixed-btn">Siguiente ‚è≠</button>
                    </div>

                    <div class="controls-bottom-row">
                        <span id="ex-step-desc">Cargando descripci√≥n...</span>
                    </div>

                </div>

                    <div class="example-grid">
                        <div class="example-box">
                            <h4>Grafo de B√∫squeda</h4>
                            <div id="ex-graph-container" style="height: 300px; background: #f8fafc; border: 1px solid #cbd5e1; border-radius: 4px;"></div>
                        </div>

                        <div class="example-box">
                            <h4>√Årbol de Decisi√≥n</h4>
                            <div id="ex-tree-container" style="height: 300px; background: #f8fafc; border: 1px solid #cbd5e1; border-radius: 4px;"></div>
                        </div>
                    </div>
                </div>

                <hr class="section-divider">

                <div class="algo-interactive-section">
                    <h2>Visualizaci√≥n del Algoritmo</h2>
                    
                    <div class="algo-controls simple-centered-controls">
                        <div class="controls-top-row">
                            <button id="algo-btn-prev" class="control-btn fixed-btn">Anterior</button>
                            <div class="step-display">
                                Paso <span id="algo-step-number">0</span>
                            </div>
                            <button id="algo-btn-next" class="control-btn fixed-btn">Siguiente</button>
                        </div>

                        <div class="controls-bottom-row">
                            <span id="algo-step-desc">Estado Inicial</span>
                        </div>
                    </div>

                    <div class="interactive-grid">
                        <div class="code-column">
                            <pre id="greedy_algorithm" class="pseudocode">
\begin{algorithm}
\caption{Greedy Sampling Algorithm}
\begin{algorithmic}
\INPUT A directed acyclic graph $G = (N,F)$ with root $r$, a natural number $k$ and a natural number $B$.
\OUTPUT A set $S$ of $k+1$ nodes to sample with $S \ni r$
\STATE $S = \{r\}$
\WHILE{$|S| \leq k+1$}
    \STATE aux = 1
    \STATE auxv = $-\infty$
    \FOR{$v$ in $N \setminus S$}
        \STATE $J = |J_v(G) \setminus \bigcup_{u \in (S \setminus \{r\})} J_u(G)|$
        \IF{auxv $\leq J \leq B$}
            \STATE aux = $v$
            \STATE auxv = $J$
        \ENDIF
    \ENDFOR
    \IF{aux $\neq -1$}
        \STATE $S = S \cup \{\text{aux}\}$
    \ELSE
        \STATE break
    \ENDIF
\ENDWHILE
\RETURN $S$
\end{algorithmic}
\end{algorithm}
                            </pre>
                            <div id="algo-variables" class="variables-panel">
                                <h3>üîç Monitor de Variables</h3>
                                <div class="vars-grid">
                                    
                                    <div class="var-card">
                                        <span class="var-name">S</span>
                                        <span id="var-S" class="var-value">{}</span>
                                    </div>

                                    <div class="var-card">
                                        <span class="var-name">aux</span>
                                        <span id="var-aux" class="var-value">NULL</span>
                                    </div>

                                    <div class="var-card">
                                        <span class="var-name">auxv</span>
                                        <span id="var-auxv" class="var-value">NULL</span>
                                    </div>

                                </div>
                            </div>
                        </div>

                        <div class="vis-column">
                            <div id="grafo-container"></div>
                        </div>
                    </div>
                </div>

                <hr class="section-divider">

                <div class="algo-efficiency-section">
                    <h2>Eficiencia Computacional</h2>
                    <div class="efficiency-box">
                        $$ O(\Delta \cdot \log(n)) $$
                    </div>
                    <p>
                        Donde $\Delta$ es el grado m√°ximo del grafo, $k$ el presupuesto y $n$ el n√∫mero de nodos.
                    </p>
                </div>
            </div>

            <!-- VISTA DEL MAPA -->
            <div id="mapa-view" class="view-section">
                
                <!-- Contenedor del Mapa -->
                <div id="map-container"></div>

                <!-- Panel de Controles Flotante -->
                <div class="controls-overlay">
                    <div class="control-header">
                        <span id="step-indicator">Paso: 0 / 0</span>
                    </div>
                    
                    <div class="slider-container">
                        <input type="range" id="sim-slider" min="0" max="100" value="0" disabled>
                    </div>

                    <div class="buttons-row">
                        <button id="btn-prev" class="control-btn">‚èÆ Anterior</button>
                        <button id="btn-play" class="control-btn">‚ñ∂ Reproducir</button>
                        <button id="btn-next" class="control-btn">Siguiente ‚è≠</button>
                    </div>

                    <div id="step-description" class="step-info-box">
                        Cargando datos...
                    </div>
                </div>

            </div>

            <div id="estadisticas-view" class="view-section">
                <div class="intro-hero">
                    <h1>Resultados Experimentales</h1>
                    <p class="intro-subtitle">
                        Evaluaci√≥n del desempe√±o del algoritmo propuesto frente a m√©todos tradicionales en redes de alcantarillado sint√©ticas y reales.
                    </p>
                </div>

                <div class="results-container">

                    <div class="result-card">
                        <div class="result-header">
                            <h3>Distribuci√≥n de Tiempos de Detecci√≥n</h3>
                            <span class="badge-experiment">Experimento 1</span>
                        </div>
                        
                        <div class="chart-wrapper">
                            <img src="assets/grafico_histograma.png" alt="Histograma de resultados" class="zoomable-image">
                            <div class="zoom-hint">üîç Clic para ampliar</div>
                        </div>

                        <div class="analysis-box">
                            <h4>üí° Interpretaci√≥n de los datos</h4>
                            <p>
                                La figura muestra la distribuci√≥n del n√∫mero de d√≠as necesarios para detectar el brote.
                                Se comparan tres m√©tricas (Media, Percentil 90 y M√°ximo) variando el n√∫mero de muestras ($k=1, 5, 10$).
                            </p>
                            <ul class="stat-list">
                                <li>
                                    <strong>Reducci√≥n de Varianza:</strong> Al aumentar el n√∫mero de muestras a 10 (color naranja), la dispersi√≥n de los d√≠as disminuye significativamente comparado con una sola muestra (azul).
                                </li>
                                <li>
                                    <strong>Convergencia:</strong> El percentil 90 se estabiliza cerca del d√≠a 7.5 con mayor muestreo, indicando una detecci√≥n m√°s robusta.
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div class="result-card">
                        <div class="result-header">
                            <h3>Comparativa de Presupuesto vs. Precisi√≥n</h3>
                            <span class="badge-experiment">Experimento 2</span>
                        </div>
                        
                        <div class="chart-wrapper">
                            <div class="placeholder-chart">
                                <span>(Imagen Tabla/Gr√°fico 2)</span>
                            </div>
                        </div>

                        <div class="analysis-box">
                            <h4>üí° Interpretaci√≥n de los datos</h4>
                            <p>
                                Se observa que la relaci√≥n costo-beneficio alcanza su punto √≥ptimo con un presupuesto de $B=15$.
                                M√°s all√° de este punto, la ganancia marginal en precisi√≥n es despreciable.
                            </p>
                        </div>
                    </div>

                </div>

                <div id="image-modal" class="modal">
                    <span class="close-modal">&times;</span>
                    <img class="modal-content" id="img01">
                    <div id="caption"></div>
                </div>
            </div>

            <div id="referencias-view" class="view-section">
                <h1>Referencias</h1>

                <div class="references-list">
                    
                    <div class="reference-card">
                        <h3>Identifying outbreaks in sewer networks: An adaptive sampling scheme under network‚Äôs uncertainty</h3>
                        <div class="ref-grid">
                            <span class="ref-label">Autores</span>
                            <span class="ref-value">Jos√© Baboun, Isabelle S. Beaudry, Luis M. Castro, Felipe Gutierrez, Alejandro Jara, Benjamin Rubio, Jos√© Verschae</span>

                            <span class="ref-label">Publicado</span>
                            <span class="ref-value">2024</span>

                            <span class="ref-label">URL</span>
                            <a href="https://www.pnas.org/doi/full/10.1073/pnas.2316616121" class="ref-link" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: text-bottom; margin-right: 4px;">
                                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                    <polyline points="15 3 21 3 21 9"></polyline>
                                    <line x1="10" y1="14" x2="21" y2="3"></line>
                                </svg>
                                https://www.pnas.org/doi/full/10.1073/pnas.2316616121
                            </a>
                        </div>
                    </div>

                    <div class="reference-card">
                        <h3>Searching for infections: algorithms for multiple sampling on trees and planar graphs</h3>
                        <div class="ref-grid">
                            <span class="ref-label">Autores</span>
                            <span class="ref-value">Rubio Orellana, Benjam√≠n Eduardo</span>

                            <span class="ref-label">Publicado</span>
                            <span class="ref-value">2023</span>

                            <span class="ref-label">URL</span>
                            <a href="https://repositorio.uc.cl/handle/11534/75255" class="ref-link" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: text-bottom; margin-right: 4px;">
                                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                    <polyline points="15 3 21 3 21 9"></polyline>
                                    <line x1="10" y1="14" x2="21" y2="3"></line>
                                </svg>
                                https://repositorio.uc.cl/handle/11534/75255
                            </a>
                        </div>
                    </div>

                    <div class="reference-card">
                        <h3>Complexity, lower bounds, and algorithms for searching infected nodes in uncertain trees</h3>
                        <div class="ref-grid">
                            <span class="ref-label">Autores</span>
                            <span class="ref-value">Baboun Larach, Jos√©</span>

                            <span class="ref-label">Publicado</span>
                            <span class="ref-value">2023</span>

                            <span class="ref-label">URL</span>
                            <a href="https://repositorio.uc.cl/handle/11534/75114" class="ref-link" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: text-bottom; margin-right: 4px;">
                                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                    <polyline points="15 3 21 3 21 9"></polyline>
                                    <line x1="10" y1="14" x2="21" y2="3"></line>
                                </svg>
                                https://repositorio.uc.cl/handle/11534/75114
                            </a>
                        </div>
                    </div>

                    <div class="reference-card">
                        <h3>Covid-Sewage-Search</h3>
                        <div class="ref-grid">
                            <span class="ref-label">Autores</span>
                            <span class="ref-value"></span>

                            <span class="ref-label">Publicado</span>
                            <span class="ref-value">2023</span>

                            <span class="ref-label">URL</span>
                            <a href="https://github.com/josebaboun/Covid-Sewage-Search" class="ref-link" target="_blank">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: text-bottom; margin-right: 4px;">
                                    <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                                    <polyline points="15 3 21 3 21 9"></polyline>
                                    <line x1="10" y1="14" x2="21" y2="3"></line>
                                </svg>
                                https://github.com/josebaboun/Covid-Sewage-Search
                            </a>
                        </div>
                    </div>

                </div>
            </div>
        </main>
    </div>

    <!-- SCRIPTS -->

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <!-- Network JS -->
    <script src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>
    
    <!-- App Logic -->
    <script src="js/state.js"></script>
    <script src="js/vis_leaflet.js"></script>
    <script src="js/vis_algorithm.js"></script>
    <script src="js/vis_example.js"></script>
    <script src="js/main.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                delimiters: [
                    {left: "$$", right: "$$", display: true},
                    {left: "\\[", right: "\\]", display: true},
                    {left: "$", right: "$", display: false},
                    {left: "\\(", right: "\\)", display: false}
                ],
                throwOnError : false
            });
        });
    </script>
</body>
</html>